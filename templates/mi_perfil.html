  
          {% extends 'base.html' %}

{% block title %}GHOST SMM{% endblock %}

{% block content %}  

                                            
                                                            

                        <!-- Page Content -->
                        <main class="py-6 px-4 sm:px-6 bg-gray-50 dark:bg-gray-900">

                                  <div x-data="{ show: true }" x-show="show" x-transition
                                     class="bg-orange-500 text-white p-4 text-sm font-semibold rounded-lg mb-6 shadow animate-wave flex items-center justify-between gap-4">
                                    <p class="flex-grow">游눤 Si necesitas cambiar otra cosa como tu nombre de usuario 游릭 puedes contactarnos ya que la pagina siue en desarrollo </p>
                                    <button @click="show = false" class="flex-shrink-0 text-white hover:text-opacity-75">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>


                                <!-- Mensajes Flash -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="mb-6 space-y-3">
      {% for category, message in messages %}
        <div class="p-3 rounded-lg border
          {% if category == 'success' %}
            bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 dark:from-green-900/20 dark:to-emerald-900/20 dark:border-green-800
          {% elif category == 'error' %}
            bg-gradient-to-r from-red-50 to-rose-50 border-red-200 dark:from-red-900/20 dark:to-rose-900/20 dark:border-red-800
          {% else %}
            bg-gradient-to-r from-blue-50 to-sky-50 border-blue-200 dark:from-blue-900/20 dark:to-sky-900/20 dark:border-blue-800
          {% endif %}">
          <div class="flex items-center gap-2">
            <div class="flex-shrink-0">
              {% if category == 'success' %}
                <!-- Success icon -->
                <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
              {% elif category == 'error' %}
                <!-- Error icon -->
                <svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9 9V5a1 1 0 112 0v4a1 1 0 11-2 0zm0 4a1 1 0 112 0 1 1 0 01-2 0z" clip-rule="evenodd"/>
                </svg>
              {% else %}
                <!-- Info icon -->
                <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10A8 8 0 11 2 10a8 8 0 0116 0zM9 9a1 1 0 112 0v4a1 1 0 11-2 0V9zm1-4a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" clip-rule="evenodd"/>
                </svg>
              {% endif %}
            </div>
            <div class="flex-1">
              <p class="text-sm font-medium
                {% if category == 'success' %}
                  text-green-800 dark:text-green-200
                {% elif category == 'error' %}
                  text-red-800 dark:text-red-200
                {% else %}
                  text-blue-800 dark:text-blue-200
                {% endif %}">
                {{ message }}
              </p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}


    <div class="sm:pl-64 flex flex-col min-h-full bg-gray-50 dark:bg-gray-900">
    <div class="flex-1 p-4 sm:p-6 lg:p-8">
        <div class="max-w-xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-6 sm:p-8">

            <div class="profile-picture-container text-center mb-6">
                {% if foto_id %}
                    <img src="{{ url_for('foto_perfil', foto_id=foto_id) }}" alt="Foto de Perfil" class="profile-picture w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-500 shadow-md">
                {% else %}
                    <img src="{{ url_for('static', filename='fotos_perfil/default.png') }}" alt="Foto de Perfil" class="profile-picture w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-500 shadow-md">
                {% endif %}
            </div>

            <form method="POST" enctype="multipart/form-data" class="space-y-4">
                <div class="form-group text-center">
                    <label for="foto" class="custom-file-upload inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md cursor-pointer transition duration-200 ease-in-out shadow-sm">
                        <i class="fas fa-upload mr-2"></i> Seleccionar foto
                    </label>
                    <input type="file" name="foto" id="foto" accept="image/*" required onchange="previewImage(event)" class="hidden">
                    <div id="preview-container" class="mt-4 flex justify-center"></div>
                </div>
                <button type="submit" name="change-photo" class="order-btn w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-md transition duration-200 ease-in-out shadow-md">Actualizar Foto</button>
            </form>

            <hr class="border-gray-300 my-6">

            <div class="profile-info space-y-3">
                <div class="profile-item flex items-center text-gray-700 dark:text-gray-300">
                    <i class="fas fa-user text-blue-500 mr-3 text-lg"></i>
                    <span class="font-semibold">Usuario:</span> <span class="ml-2">{{ usuario }} <i class="fas fa-check-circle text-blue-500"></i></span>
                </div>
                <div class="profile-item flex items-center text-gray-700 dark:text-gray-300">
                    <i class="fas fa-envelope text-blue-500 mr-3 text-lg"></i>
                    <span class="font-semibold">Correo:</span> <span class="ml-2">{{ email }}</span>
                </div>
            </div>

            <hr class="border-gray-300 my-6">

            <form method="POST" class="space-y-4">
                <div class="change-password-section bg-gray-50 dark:bg-gray-700 p-5 rounded-lg shadow-inner">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">Cambiar Contrase침a</h3>
                    <div class="form-group mb-3">
                        <label for="current-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Contrase침a Actual</label>
                        <input type="password" name="current-password" id="current-password" placeholder="Contrase침a actual" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                    </div>
                    <div class="form-group mb-3">
                        <label for="new-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nueva Contrase침a</label>
                        <input type="password" name="new-password" id="new-password" placeholder="Nueva contrase침a" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                    </div>
                    <div class="form-group mb-4">
                        <label for="confirm-new-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirmar Nueva Contrase침a</label>
                        <input type="password" name="confirm-new-password" id="confirm-new-password" placeholder="Confirmar nueva contrase침a" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                    </div>
                    <button type="submit" name="change-password" class="order-btn w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md transition duration-200 ease-in-out shadow-md">Cambiar Contrase침a</button>
                </div>
            </form>

            <hr class="border-gray-300 my-6">

            <form method="POST" class="space-y-4">
                <div class="change-email-section bg-gray-50 dark:bg-gray-700 p-5 rounded-lg shadow-inner">
                    <h3 class="text-xl font-semibold text-white  mb-4 flex items-center">
                        <i class="fas fa-envelope text-white mr-2"></i> Cambiar Correo Electr칩nico
                    </h3>
                    <div class="form-group mb-3">
                        <label for="current-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Correo Electr칩nico Actual</label>
                        <input type="email" name="current-email" id="current-email" placeholder="Correo electr칩nico actual" value="{{ email }}" readonly class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed">
                    </div>
                    <div class="form-group mb-3">
                        <label for="new-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nuevo Correo Electr칩nico</label>
                        <input type="email" name="new-email" id="new-email" placeholder="Nuevo correo electr칩nico" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                    </div>
                    <div class="form-group mb-4">
                        <label for="current-password-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Contrase침a Actual</label>
                        <input type="password" name="current-password-email" id="current-password-email" placeholder="Contrase침a actual" required class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                    </div>
                    <button type="submit" name="change-email" class="order-btn w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-md transition duration-200 ease-in-out shadow-md">Cambiar Correo Electr칩nico</button>
                </div>
            </form>
            <hr class="border-gray-300 my-6">

<!-- Cambiar WhatsApp -->
<div class="section-card mb-8 bg-gray-50 dark:bg-gray-700 p-5 rounded-lg shadow-inner">
    <h3 class="text-2xl font-semibold mb-4 flex items-center text-white">
        <i class="fab fa-whatsapp text-green-400 mr-2"></i> Cambiar WhatsApp
    </h3>
    <form action="{{ url_for('mi_perfil') }}" method="post" class="space-y-4">
        <input type="hidden" name="change-whatsapp">
        <div class="form-group">
            <label for="new-whatsapp" class="block text-sm font-medium text-green-400 mb-2">Nuevo N칰mero de WhatsApp:</label>
            <input type="tel" id="new-whatsapp" name="new-whatsapp" value="{{ whatsapp }}" required
                   class="w-full py-2 px-3 border rounded-md bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>
        <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md font-semibold">
            Actualizar WhatsApp
        </button>
    </form>
</div>
        </div>
    </div>
</div>

<script>
    function previewImage(event) {
        const previewContainer = document.getElementById('preview-container');
        const file = event.target.files[0];

        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function(e) {
                previewContainer.innerHTML = `
                    <img src="${e.target.result}" alt="Preview"
                         class="max-w-32 max-h-32 rounded-lg border border-gray-300 dark:border-gray-600 shadow-md">
                `;
            }
            reader.readAsDataURL(file);
        } else {
            previewContainer.innerHTML = '';
        }
    }
</script>

     {% endblock %}