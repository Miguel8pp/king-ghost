import subprocess
import time

# Lista de proxies (agrega m√°s si quieres)
proxies = [
    "http://43.159.132.166:13001",
    "http://158.255.77.169:80",
    "http://43.153.112.164:13001",
    "http://128.199.202.122:8080",
    "http://43.130.12.5:13001",
    "http://43.135.165.192:13001",
    "http://43.135.129.244:13001",
    "http://170.106.196.226:13001",
    "http://49.51.200.62:13001",
    "http://95.216.148.196:80",
    "http://43.135.161.247:13001",
    "http://43.135.153.235:13001",
    "http://81.169.213.169:8888",
    "http://43.135.158.192:13001",
    "http://43.153.76.64:13001",
    "http://170.106.104.171:13001",
    "http://170.106.168.100:13001",
    "http://189.22.234.39:80",
    "http://43.153.62.242:13001",
    "http://177.234.217.44:999",
    "http://43.153.100.212:13001",
    "http://43.159.130.134:13001",
    "http://170.106.181.112:13001",
    "http://47.90.205.231:33333",
    "http://97.74.87.226:80",
    "http://72.10.160.90:11121",
    "http://72.10.160.172:1525",
    "http://154.65.39.7:80",
    "http://46.47.197.210:3128",
    "http://51.195.118.225:28003",
    "http://45.140.143.77:18080",
    "http://161.97.136.251:3128",
    "http://150.95.26.146:7080",
    "http://27.66.195.243:25100",
    "http://162.223.90.130:80",
    "http://212.33.205.55:3128",
    "http://13.38.153.36:80",
    "http://13.36.87.105:3128",
    "http://15.236.106.236:3128",
    "http://43.159.139.163:13001",
    "http://43.159.134.4:13001",
    "http://49.51.242.247:13001",
    "http://43.153.95.171:13001",
    "http://43.153.101.244:13001",
    "http://170.106.114.25:13001",
    "http://77.245.150.158:1453",
    "http://47.252.29.28:11222",
    "http://3.71.239.218:3128",
    "http://3.122.84.99:3128",
    "http://3.124.133.93:3128",
    "http://18.185.169.150:3128",
    "http://43.153.45.169:13001",
    "http://43.153.14.2:13001",
    "http://3.129.184.210:80",
    "http://52.63.129.110:3128",
    "http://170.106.193.157:13001",
    "http://43.153.69.199:13001",
    "http://43.153.92.75:13001",
    "http://43.153.94.8:13001",
    "http://8.217.124.178:49440",
    "http://159.203.61.169:3128",
    "http://198.199.86.11:8080",
    "http://46.101.104.251:38887",
    "http://50.207.199.87:80",
    "http://50.207.199.80:80",
    "http://50.207.199.83:80",
    "http://50.202.75.26:80",
    "http://50.169.37.50:80",
    "http://50.239.72.18:80",
    "http://50.175.212.66:80",
    "http://50.217.226.47:80",
    "http://50.239.72.19:80",
    "http://50.175.212.74:80",
    "http://50.207.199.82:80",
    "http://50.174.7.152:80",
    "http://50.122.86.118:80",
    "http://189.22.234.43:80",
    "http://54.233.119.172:3128",
    "http://51.17.27.173:3128",
    "http://13.51.231.191:3128",
    "http://204.236.176.61:3128",
    "http://13.246.209.48:1080",
    "http://99.80.11.54:3128",
    "http://3.97.176.251:3128",
    "http://3.97.167.115:3128",
    "http://78.108.41.124:9111",
    "http://3.90.100.12:80",
    "http://50.169.222.243:80",
    "http://50.239.72.17:80",
    "http://50.174.7.157:80",
    "http://50.217.226.44:80",
    "http://50.221.230.186:80",
    "http://50.217.226.42:80",
    "http://50.174.7.155:80",
    "http://50.174.7.162:80",
    "http://47.56.110.204:8989",
    "http://50.207.199.86:80",
    "http://211.128.96.206:80",
    "http://50.231.104.58:80",
    "http://157.66.16.38:8070",
    "http://45.184.103.110:999",
    "http://188.125.169.67:8080",
    "http://124.121.2.214:8080",
    "http://45.176.224.24:8080",
    "http://190.192.45.168:3128",
    "http://92.51.122.174:8080",
    "http://103.157.135.199:443",
    "http://116.203.139.209:5678",
    "http://4.175.200.138:8080",
    "http://52.13.248.29:3128",
    "http://158.255.77.168:80",
    "http://123.58.199.232:8168",
    "http://78.80.228.150:80",
    "http://50.174.7.159:80",
    "http://32.223.6.94:80",
    "http://13.37.89.201:80",
    "http://13.37.59.99:3128",
    "http://13.38.176.104:3128",
    "http://13.36.113.81:3128",
    "http://44.218.183.55:80",
    "http://50.174.7.153:80",
    "http://165.232.129.150:80",
    "http://50.239.72.16:80",
    "http://50.217.226.40:80",
    "http://50.221.74.130:80",
    "http://190.58.248.86:80",
    "http://188.68.52.244:80",
    "http://54.67.125.45:3128",
    "http://184.169.154.119:80",
    "http://3.136.29.104:80",
    "http://13.208.56.180:80",
    "http://35.72.118.126:80"
]

# URL de video de prueba (puedes cambiarla)
test_url = "https://youtu.be/rVEgtdAzOE0"

# User-Agent como si fuera Chrome en Windows
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"

print("Probando proxies...\n")

for proxy in proxies:
    print(f"üß™ Probando proxy: {proxy}")
    try:
        result = subprocess.run(
            [
                "yt-dlp",
                "--proxy", proxy,
                "--no-check-certificate",
                "--user-agent", user_agent,
                "--skip-download",
                "--quiet",
                "--print", "title",
                test_url
            ],
            capture_output=True,
            text=True,
            timeout=30
        )

        if result.returncode == 0 and result.stdout.strip():
            print(f"‚úÖ Proxy funcional: {proxy} ‚Äî T√≠tulo: {result.stdout.strip()}\n")
        else:
            print(f"‚ùå No funcion√≥: {proxy}\n")

    except subprocess.TimeoutExpired:
        print(f"‚è∞ Timeout: {proxy}\n")
    except Exception as e:
        print(f"‚ö†Ô∏è Error con {proxy}: {e}\n")

    time.sleep(2)  # Espera entre pruebas para no ser bloqueado

print("‚úÖ Pruebas finalizadas.")
